<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>

    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
		p { position: absolute; left: 310px; top: 32px; }
      
  </style>
</head>


<body>
    <select name="specialStart">
        <option value="Run">Run</option>
        <option value="notRun">Pause</option>
    </select>
    <div id= "practiceDropDown"></div>
    <div id= "ProjectTypeDropDown"></div>
    <div id= "toolTypeDropDown"></div>
    <div id= "PhaseDropDown"></div>
    
    
  <script type="text/javascript">   

    var categoryName = "https://raw.githubusercontent.com/hanshenSun/d3_skillMatrix/master/CORE%20Tools%20Data%20-%20Info.csv";
    var dataFile = "https://raw.githubusercontent.com/hanshenSun/d3_skillMatrix/master/CORE%20Tools%20Data.csv";
    var dataFields = ["Practice", "Project Type", "	Tool Type", "Phase"];
  
    
    
    d3.csv(categoryName, function(error,data){
      var practice = d3.select("#practiceDropDown")
      	.append("select")
      	.attr("id", "practiceSelector")
      	.selectAll("option")
      	.data(data)
      	.enter()
      	.append("option")
      	.text(function(d) {return d.Practice;})
      	.attr("value", function (d,i){return i;});

      
	var projectType = d3.select("#ProjectTypeDropDown")
        .append("select")
        .attr("id", "projectSelector")
        .selectAll("option")
        .data(data)
        .enter()
        .append("option")
        .text(function(d){return d['Project Type'];})
        .attr("value", function(d,i){return i;});
        
        
    var projectType = d3.select("#toolTypeDropDown")
        .append("select")
        .attr("id", "toolSelector")
        .selectAll("option")
        .data(data)
        .enter()
        .append("option")
        .text(function(d){return d['Tool Type'];})
        .attr("value", function(d,i){return i;});  
        
        
     var projectType = d3.select("#PhaseDropDown")
        .append("select")
        .attr("id", "phaseSelector")
        .selectAll("option")
        .data(data)
        .enter()
        .append("option")
        .text(function(d){return d.Phase;})
        .attr("value", function(d,i){return i;});     
          
        

        
d3.select("select")
  .on("change",function(d){
    var selected = d3.select("#practiceSelector").node().value;//retrieve the selected index
    var selectedPractice = data[selected]['Practice'];

    var selected = d3.select("#projectSelector").node().value;//retrieve the selected index
    var selectedProjectType = data[selected]['Project Type'];
    
    console.log("triggered")
    console.log(selectedProjectType);
    
    d3.csv(dataFile, function(error, spreadSheetData){
        for (i = 0, len = spreadSheetData.length; i < len; i++){
            var d = spreadSheetData[i];
            var practiceData = d.Practice;
            var projectTypeData = d["Project Type"];
            
            if (practiceData.includes(selectedPractice)){
                
                if (projectTypeData.includes(selectedProjectType)){
                    
                    console.log(d["Tool Name"]);
                    }
                                                
                
                
            }

             
        }
        });  
        
    
    })
        

        
        
    })
    
    
    


  </script>
</body>
